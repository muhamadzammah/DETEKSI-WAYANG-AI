<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Wayang AI Detection</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

<style>
:root{
    --primary:#6f42c1;
    --accent:#20c997;
}

body{
    font-family:'Segoe UI',sans-serif;
    background:linear-gradient(180deg,#f8f9ff,#eef1fb);
}

/* NAVBAR */
.navbar{
    background:#fff;
    box-shadow:0 4px 20px rgba(0,0,0,.08);
}

/* HERO */
.hero{
    padding:90px 20px 40px;
    text-align:center;
}
.hero h1{
    font-weight:800;
    background:linear-gradient(90deg,var(--primary),var(--accent));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}
.hero p{color:#666}

/* METODE */
.method-card{
    background:rgba(255,255,255,.75);
    backdrop-filter: blur(12px);
    border-radius:24px;
    padding:24px;
    height:100%;
    box-shadow:0 12px 35px rgba(0,0,0,.1);
    transition:.4s;
}
.method-card:hover{
    transform:translateY(-8px);
}
.method-card h6{
    font-weight:700;
}
.method-card p{
    font-size:.95rem;
}

/* CARD UTAMA */
.main-card{
    border:none;
    border-radius:30px;
    padding:45px;
    background:rgba(255,255,255,.9);
    box-shadow:0 20px 50px rgba(0,0,0,.12);
}

/* UPLOAD */
.upload-box{
    border:2px dashed #cfc7f5;
    border-radius:25px;
    padding:35px;
    background:#f6f4ff;
    transition:.3s;
}
.upload-box:hover{
    border-color:var(--primary);
    background:#eee9ff;
}

/* BUTTON */
.btn-ai{
    background:linear-gradient(90deg,var(--primary),var(--accent));
    color:#fff;
    border-radius:50px;
    font-weight:600;
}

/* PREVIEW */
#previewImage{
    max-height:260px;
    border-radius:25px;
    box-shadow:0 12px 30px rgba(0,0,0,.18);
}

/* OUTPUT */
.glass-card{
    background:rgba(255,255,255,.75);
    backdrop-filter: blur(14px);
    border-radius:25px;
    padding:28px;
    height:100%;
    box-shadow:0 15px 40px rgba(0,0,0,.12);
    animation:fadeUp .9s ease forwards;
    opacity:0;
}

@keyframes fadeUp{
    from{opacity:0;transform:translateY(35px)}
    to{opacity:1;transform:translateY(0)}
}

.ai-icon{
    font-size:2.5rem;
    background:linear-gradient(135deg,var(--primary),var(--accent));
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
}

.confidence-ring{
    width:120px;
    height:120px;
    border-radius:50%;
    background:conic-gradient(var(--primary) 0%, var(--accent) var(--percent), #e9ecef 0);
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:800;
    font-size:1.3rem;
    margin:auto;
}

/* IMAGE GRID */
.img-box{
    background:#fff;
    border-radius:22px;
    padding:12px;
    box-shadow:0 12px 30px rgba(0,0,0,.1);
    transition:.4s;
}
.img-box:hover{
    transform:translateY(-10px) scale(1.04);
}
.img-box img{
    width:100%;
    height:150px;
    object-fit:cover;
    border-radius:15px;
}
.img-box p{
    margin-top:8px;
    font-weight:600;
}
</style>
</head>

<body>

<nav class="navbar">
<div class="container">
<span class="navbar-brand fw-bold text-primary">
<i class="bi bi-cpu-fill"></i> Wayang AI
</span>
</div>
</nav>

<!-- HERO -->
<section class="hero">
<div class="container">
<h1>AI Deteksi Tokoh Wayang</h1>
<p>Klasifikasi Wayang berbasis CNN & Pengolahan Citra Digital</p>
</div>
</section>

<!-- METODE UTAMA -->
<section class="container mb-5">
<div class="row g-4 text-center">

<div class="col-md-4">
<div class="method-card">
<i class="bi bi-diagram-3-fill ai-icon"></i>
<h6 class="mt-3">Convolutional Neural Network (CNN)</h6>
<p class="text-muted mb-0">
CNN digunakan untuk mengekstraksi fitur visual citra wayang seperti bentuk wajah,
siluet tokoh, ornamen khas wayang, serta struktur tepi dan tekstur sebagai ciri pembeda.
</p>
</div>
</div>

<div class="col-md-4">
<div class="method-card">
<i class="bi bi-cpu-fill ai-icon"></i>
<h6 class="mt-3">Transfer Learning (MobileNetV2)</h6>
<p class="text-muted mb-0">
Model memanfaatkan MobileNetV2 pretrained ImageNet sehingga proses pelatihan
menjadi lebih cepat, stabil, dan akurat meskipun menggunakan dataset wayang terbatas.
</p>
</div>
</div>

<div class="col-md-4">
<div class="method-card">
<i class="bi bi-sliders ai-icon"></i>
<h6 class="mt-3">Fine-Tuning Model</h6>
<p class="text-muted mb-0">
Fine-tuning dilakukan dengan membekukan layer awal dan melatih ulang 20 layer terakhir
agar fitur tingkat tinggi lebih spesifik terhadap karakteristik citra wayang serta menghindari overfitting.
</p>
</div>
</div>

</div>
</section>

<!-- DETEKSI -->
<section class="container pb-5">
<div class="main-card">

<h4 class="text-center mb-4">
<i class="bi bi-cloud-upload-fill"></i> Upload Gambar Wayang
</h4>

<div class="upload-box text-center w-50 mx-auto">
<input type="file" id="imageInput" class="form-control form-control-lg mb-3">
<button onclick="upload()" class="btn btn-ai btn-lg w-100">
<i class="bi bi-robot"></i> Proses AI
</button>
</div>

<div class="text-center mt-4">
<img id="previewImage" class="img-fluid d-none">
</div>

<!-- HASIL -->
<div id="resultSection" class="d-none mt-5">

<hr class="my-4">

<h3 class="text-center mb-4">
<i class="bi bi-cpu-fill"></i> Hasil Deteksi AI
</h3>

<div class="row g-4 align-items-stretch">

<div class="col-md-4">
<div class="glass-card text-center">
<i class="bi bi-person-badge-fill ai-icon"></i>
<h6 class="mt-3 text-muted">Nama Wayang</h6>
<h4 id="className" class="fw-bold"></h4>
</div>
</div>

<div class="col-md-4">
<div class="glass-card">
<i class="bi bi-chat-text-fill ai-icon"></i>
<h6 class="mt-3 text-muted">Deskripsi</h6>
<p id="description" class="mt-2"></p>
</div>
</div>

<div class="col-md-4">
<div class="glass-card text-center">
<i class="bi bi-speedometer2 ai-icon"></i>
<h6 class="mt-3 text-muted">Keyakinan Model</h6>
<div id="confidenceCircle" class="confidence-ring mt-3">0%</div>
</div>
</div>

</div>

<h4 class="text-center mt-5 mb-3">
<i class="bi bi-images"></i> Visualisasi Citra
</h4>

<div class="row g-4 text-center">
<div class="col-md-3"><div class="img-box"><img id="imgOriginal"><p>Original</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgGrayscale"><p>Grayscale</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgBinary"><p>Binary</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgCanny"><p>Canny</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgSobel"><p>Sobel</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgPrewitt"><p>Prewitt</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgOpening"><p>Opening</p></div></div>
<div class="col-md-3"><div class="img-box"><img id="imgClosing"><p>Closing</p></div></div>
</div>

</div>
</div>
</section>

<script>
const fileInput=document.getElementById("imageInput");
const preview=document.getElementById("previewImage");

fileInput.addEventListener("change",()=>{
preview.src=URL.createObjectURL(fileInput.files[0]);
preview.classList.remove("d-none");
});

async function upload(){
const form=new FormData();
form.append("file",fileInput.files[0]);

const res=await fetch("/predict",{method:"POST",body:form});
const data=await res.json();

document.getElementById("resultSection").classList.remove("d-none");

className.innerText=data.class_name;
description.innerText=data.description;

const conf=Math.round(data.confidence*100);
confidenceCircle.innerText=conf+"%";
confidenceCircle.style.setProperty("--percent",conf+"%");

imgOriginal.src=data.images.original;
imgGrayscale.src=data.images.grayscale;
imgBinary.src=data.images.binary;
imgCanny.src=data.images.canny;
imgSobel.src=data.images.sobel;
imgPrewitt.src=data.images.prewitt;
imgOpening.src=data.images.opening;
imgClosing.src=data.images.closing;
}
</script>

</body>
</html>
